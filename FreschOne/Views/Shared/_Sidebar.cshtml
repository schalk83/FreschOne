@{
    bool isAdmin = ViewBag.IsAdmin;
}
<nav class="navbar navbar-expand-lg navbar-light bg-light d-flex flex-column p-3"
     style="position: fixed; top: 0; left: 0; width: 250px; min-height: 100vh; overflow-y: auto;">

    <!-- Navbar brand section -->
    <div class="mb-4">
        <a class="navbar-brand" asp-controller="Home" asp-action="Index">FreschOne</a>
    </div>

    <!-- Navigation links container -->
    <div class="flex-grow-1 d-flex flex-column">
        <ul class="nav flex-column">
             @if (isAdmin)
            {
                <li class="nav-item">
                    <a class="nav-link text-dark" asp-controller="ProcessSetup" asp-action="Processes">Process Set Up</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-dark" asp-controller="Users" asp-action="Index">Users</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-dark" asp-controller="ProcessUsers" asp-action="Index">Process Users</a>
                </li>
              }
                        
            <li class="nav-item">
                <a class="nav-link text-dark" asp-controller="DataManagement" asp-action="Index"
                   asp-route-userId="@Context.Request.Query["userId"]">
                    Data Management
                </a>
            </li>

           @*  <li class="nav-item">
                <div class="nav-link d-flex justify-content-between align-items-center">
                    <a class="text-dark" asp-controller="TableX" asp-action="Index" asp-route-tablename="tbl_tran_Student">Student</a>
                    <span class="toggle-arrow">▼</span>
                </div>

                <!-- Sub-menu (hidden by default) -->
                <ul class="sub-menu">
                    <li>
                        <a class="nav-link" asp-controller="TableXX" asp-action="Index" asp-route-tablename="tbl_tran_Student">Student Option 1</a>
                    </li>
                    <li>
                        <a class="nav-link" asp-controller="TableXxx" asp-action="Index" asp-route-tablename="tbl_tran_Student">Student Option 500 ABDBDEBEBDEBDE 2</a>
                    </li>
                </ul>
            </li> *@
            <li>
                <hr />
            </li>
            <li class="nav-item">
                <a class="nav-link text-danger" asp-controller="Account" asp-action="Login">Logout</a>
            </li>
        </ul>
    </div>
</nav>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll(".toggle-arrow").forEach(function (arrow) {
            arrow.addEventListener("click", function (event) {
                event.stopPropagation(); // Prevent link click interference

                // Find the sub-menu and toggle visibility
                let subMenu = this.closest(".nav-item").querySelector(".sub-menu");
                let isOpen = subMenu.style.display === "block";
                subMenu.style.display = isOpen ? "none" : "block";

                // Rotate arrow
                this.classList.toggle("open", !isOpen);
            });
        });
    });
</script>
